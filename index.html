<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phone Login</title>
</head>

<body>

  <h2>Phone Login</h2>

  <input id="phone" placeholder="+994501234567">
  <button onclick="sendCode()">Send SMS</button>

  <br><br>

  <input id="code" placeholder="Verification code">
  <button onclick="verifyCode()">Verify</button>

  <!-- reCAPTCHA -->
  <div id="recaptcha-container"></div>

  <script type="module">
    // Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import {
      getAuth,
      RecaptchaVerifier,
      signInWithPhoneNumber
    } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

    // ðŸ” Firebase config (sÉ™nin)
    const firebaseConfig = {
      apiKey: "AIzaSyB24sYMS0csMn9K6JMKMUsuEOxHFUxVlKk",
      authDomain: "maxito-1cb81.firebaseapp.com",
      projectId: "maxito-1cb81",
      storageBucket: "maxito-1cb81.firebasestorage.app",
      messagingSenderId: "536049935284",
      appId: "1:536049935284:web:99fdf9a5dbf627dea5c8e1"
    };

    // Init
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // reCAPTCHA init
    window.recaptchaVerifier = new RecaptchaVerifier(
      auth,
      "recaptcha-container",
      { size: "normal" }
    );

    // Send SMS
    window.sendCode = async () => {
      const phoneNumber = document.getElementById("phone").value;
      try {
        window.confirmationResult = await signInWithPhoneNumber(
          auth,
          phoneNumber,
          window.recaptchaVerifier
        );
        alert("SMS code sent");
      } catch (e) {
        alert(e.message);
      }
    };

    // Verify code
    window.verifyCode = async () => {
      const code = document.getElementById("code").value;
      try {
        await window.confirmationResult.confirm(code);
        alert("Login successful");
      } catch (e) {
        alert("Invalid code");
      }
    };
  </script>

</body>
</html>
